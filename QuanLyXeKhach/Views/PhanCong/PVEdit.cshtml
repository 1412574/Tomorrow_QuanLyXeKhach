@model DataModel.PhanCong


@{

	IEnumerable<DataModel.NhanVien> nhanViens = ViewData["NhanViens"] as IEnumerable<DataModel.NhanVien>;
	IEnumerable<DataModel.CongViec> congViecs = ViewData["CongViecs"] as IEnumerable<DataModel.CongViec>;
}

@using (Html.BeginForm())
{

	@Html.AntiForgeryToken()
	<form>
		<div class="modal-body">
			<div class="form-horizontal">
				<div class="row">
					<div class="col-md-7 item_content">
						<table class="table table-header">
							<tbody style="background-color: #f0f0f0;">
								<tr class="unread">
									<td class="col-sm-4 align-top">Nhân viên</td>
									<td class="col-sm-3">Vai trò</td>
									<td class="col-sm-3">Trạng thái</td>
								</tr>
							</tbody>
						</table>

						@if (nhanViens != null && nhanViens.Count() <= 5)
						{
							<table class="table table-inbox table-hover table-inside" style="border: 1px solid #d3d3d3;">
								<tbody>
									@{int i = 0; }
									@foreach (DataModel.NhanVien nhanVien in nhanViens)
									{
										<tr>
											<td data-toggle="modal" class="col-sm-4 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
												<h5>
													@nhanVien.ShortString
												</h5>
											</td>

											<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
												<h5>
													@nhanVien.VaiTro.tenVT
												</h5>
											</td>

											<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
												<h5>
													@nhanVien.TrangThai.tenTT
												</h5>
											</td>
										</tr>

										++i;
									}
								</tbody>
							</table>
						}
						else
						{
							<table class="table table-inbox table-hover table-inside" style="border: 1px solid #d3d3d3;">
								<tbody>
									@{int i = 5; }
									@foreach (DataModel.NhanVien nhanVien in nhanViens)
									{
										if (i < 10)
										{
											<tr class="NVtr" data-status="NV-@(i / 5)">
												<td data-toggle="modal" class="col-sm-4 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
													<h5>
														@nhanVien.ShortString
													</h5>
												</td>

												<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
													<h5>
														@nhanVien.VaiTro.tenVT
													</h5>
												</td>

												<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
													<h5>
														@nhanVien.TrangThai.tenTT
													</h5>
												</td>
											</tr>

										}
										else
										{
											<tr class="NVtr" data-status="NV-@(i / 5)" style="display:none;">
												<td data-toggle="modal" class="col-sm-4 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
													<h5>
														@nhanVien.ShortString
													</h5>
												</td>

												<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
													<h5>
														@nhanVien.VaiTro.tenVT
													</h5>
												</td>

												<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonNV(@nhanVien.maNV)">
													<h5>
														@nhanVien.TrangThai.tenTT
													</h5>
												</td>
											</tr>
										}
										++i;
									}
								</tbody>
							</table>

							<ul class="pagination pull-right">
								<li><label class="NVPaging btn btn-xs no-border filter sharp btn-primary" data-target="NV-1" onclick="NVPaging(this)">1</label></li>
								@for (int p = 2; p <= (nhanViens.Count() + 4) / 5; ++p)
								{
									<li><label class="NVPaging btn btn-xs no-border filter sharp" data-target="NV-@p" onclick="NVPaging(this)">@p</label></li>
								}
							</ul>
						}

					</div>

					<div class="col-md-5 item_content" style="float:right">
						@Html.ValidationSummary(true, "", new { @class = "text-danger" })
						@Html.HiddenFor(model => model.maPC)
						<div class="text-center col-md-12">
							Nhấp vào nhân viên và công việc để thực hiện phân công.
						</div>
						<div class="col-md-12">
							<div class="col-md-12">
								<div class="row form-group"></div>
							</div>
							<div class="form-group">
								@Html.LabelFor(model => model.maNV, htmlAttributes: new { @class = "" })
								<div class="">
									@Html.EditorFor(model => model.maNV, new { htmlAttributes = new { @class = "maNV form-control ", @readonly = "readonly", @id = "maNV" } })
									@Html.ValidationMessageFor(model => model.maNV, "", new { @class = "text-danger" })
								</div>
							</div>

							<div class="form-group">
								@Html.LabelFor(model => model.maCV, htmlAttributes: new { @class = "" })
								<div class="">
									@Html.EditorFor(model => model.maCV, new { htmlAttributes = new { @class = "form-control ", @readonly = "readonly", @id = "maCV" } })
									@Html.ValidationMessageFor(model => model.maCV, "", new { @class = "text-danger" })
								</div>
							</div>

							@Html.HiddenFor(model => model.ngayPC)

							<div class="form-group">
								@Html.LabelFor(model => model.nhiemVu, htmlAttributes: new { @class = "" })
								<div class="">
									@Html.EditorFor(model => model.nhiemVu, new { htmlAttributes = new { @class = "form-control " } })
									@Html.ValidationMessageFor(model => model.nhiemVu, "", new { @class = "text-danger" })
								</div>
							</div>

							<div class="form-group">
								@Html.LabelFor(model => model.danhGia, htmlAttributes: new { @class = "" })
								<div class="">
									@Html.EditorFor(model => model.danhGia, new { htmlAttributes = new { @class = "form-control " } })
									@Html.ValidationMessageFor(model => model.danhGia, "", new { @class = "text-danger" })
								</div>
							</div>

							<div class="form-group">
								@Html.LabelFor(model => model.ghiChu, htmlAttributes: new { @class = "" })
								<div class="">
									@Html.EditorFor(model => model.ghiChu, new { htmlAttributes = new { @class = "form-control " } })
									@Html.ValidationMessageFor(model => model.ghiChu, "", new { @class = "text-danger" })
								</div>
							</div>

						</div>
					</div>

					<div class="col-md-7 item_content">
						<table class="table table-header">
							<tbody style="background-color: #f0f0f0;">
								<tr class="unread">
									<td class="col-sm-4 align-top">Công việc</td>
									<td class="col-sm-3">Ngày hoàn thành</td>
									<td class="col-sm-3">Yêu cầu</td>
								</tr>
							</tbody>
						</table>
						@if (congViecs != null && congViecs.Count() <= 5)
						{
							<table class="table table-inbox table-hover table-inside" style="border: 1px solid #d3d3d3;">
								<tbody>
									@{int i = 0; }
									@foreach (DataModel.CongViec congViec in congViecs)
									{
										<tr>
											<td data-toggle="modal" class="col-sm-4 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
												<h5>
													@congViec.ShortString
												</h5>
											</td>

											<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
												<h5>
													@congViec.hanHoanThanh
												</h5>
											</td>

											<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
												<h5>
													@congViec.yeuCauCV
												</h5>
											</td>
										</tr>

										++i;
									}
								</tbody>
							</table>
						}
						else
						{
							<table class="table table-inbox table-hover table-inside" style="border: 1px solid #d3d3d3;">
								<tbody>
									@{int i = 5; }
									@foreach (DataModel.CongViec congViec in congViecs)
									{
										if (i < 10)
										{
											<tr class="CVtr" data-status="CV-@(i / 5)">
												<td data-toggle="modal" class="col-sm-4 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
													<h5>
														@congViec.ShortString
													</h5>
												</td>

												<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
													<h5>
														@congViec.hanHoanThanh
													</h5>
												</td>

												<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
													<h5>
														@congViec.yeuCauCV
													</h5>
												</td>
											</tr>
										}
										else
										{
											<tr class="CVtr" data-status="CV-@(i / 5)" style="display:none;">
												<td data-toggle="modal" class="col-sm-4 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
													<h5>
														@congViec.ShortString
													</h5>
												</td>

												<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
													<h5>
														@congViec.hanHoanThanh
													</h5>
												</td>

												<td data-toggle="modal" class="col-sm-3 view-message  dont-show" onclick="ChonCV(@congViec.maCV)">
													<h5>
														@congViec.yeuCauCV
													</h5>
												</td>
											</tr>
										}
										++i;
									}
								</tbody>
							</table>

							<ul class="pagination pull-right">
								<li><label class="CVPaging btn btn-xs no-border filter sharp btn-primary" data-target="CV-1" onclick="CVPaging(this)">1</label></li>
								@for (int p = 2; p <= (nhanViens.Count() + 4) / 5; ++p)
								{
									<li><label class="CVPaging btn btn-xs no-border filter sharp" data-target="CV-@p" onclick="CVPaging(this)">@p</label></li>
								}
							</ul>
						}
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<div class="text-center col-md-12" style="margin-top:15px;">
				<button type="submit" class="btn btn-primary btn-sx sharp"><i class="glyphicon glyphicon-save"></i> Lưu</button>
			</div>
		</div>
	</form>
}
